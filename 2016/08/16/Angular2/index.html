<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Angular2 學習筆記：實作官網「英雄列表」範例 · Anny's Blog</title><link rel="short icon" href="/favicon.ico"><!-- font--><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono"><!-- icon--><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><!-- theme style--><link rel="stylesheet" href="/css/style.css"><!-- baidu analytics--><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?9e0cbea7d3319c6c94c71dfb93c151b8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><!-- google analytics--><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-74273646-1', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">Anny's Blog</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">首頁</a></li><li class="nav-link"><a href="/archives/" target="_self">總攬</a></li><li class="nav-link"><a href="/categories/" target="_self">分類</a></li><li class="nav-link"><a href="/tags/" target="_self">標籤</a></li><li class="nav-link"><a href="/about/" target="_self">關於我</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">Angular2 學習筆記：實作官網「英雄列表」範例</h1><span class="post-time">Aug 16, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Directory</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#環境安裝"><span class="toc-text">環境安裝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#範例實作"><span class="toc-text">範例實作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#參考資料"><span class="toc-text">參考資料</span></a></li></ol></div><div class="post-content"><p>最近開始接觸前端正夯的 Angular2 ，程式底子不好的我，在看了許多官方文件及影片後依舊懵懵懂懂，於是決定先著手寫個小範例來練習。<br><a id="more"></a></p>
<h3 id="環境安裝"><a href="#環境安裝" class="headerlink" title="環境安裝"></a>環境安裝</h3><p>這篇主要以範例實作為主，故附上我參考的環境安裝流程文章以供參考。<br>→ <a href="https://gist.github.com/doggy8088/b3c70a2afa940aeb171e19ed0caf3fcc" target="_blank" rel="external">環境安裝傳送門</a> ( Will 保哥-新手入門篇 實作環境說明)</p>
<p><br></p>
<h3 id="範例實作"><a href="#範例實作" class="headerlink" title="範例實作"></a>範例實作</h3><p>此官方範例可讓初學者了解 Angular2 基本架構，學習如何宣告變數、傳值，並使用 ngFor、ngIf 將 原本靜態的網頁成為動態網頁。<br>★ 範例功能：點選英雄列表中之一位英雄，英雄詳細資訊區塊將顯示該位英雄的編號、姓名及強項<br><br><img src="/2016/08/16/Angular2/hero-static.png"></p>
<p><br></p>
<p><strong>Step 1：準備純靜態 Template</strong></p>
<ul>
<li>app.component.html</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero-profile"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>英雄列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero-detail-wrap"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"sub"</span>&gt;</span>請從列表中選一位英雄<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"hero-list"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Windstorm<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Mr. Nice<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Magneta<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"hero-detail"</span>&gt;</span>英雄詳細資訊<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>編號: 1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"Windstorm"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>強項: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"power"</span> <span class="attr">value</span>=<span class="string">"Weather mastery"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p><br></p>
<ul>
<li>app.component.css</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.hero-profile</span> &#123; <span class="attribute">font-family</span>: <span class="string">"Microsoft JhengHei"</span>; &#125;</div><div class="line"><span class="selector-class">.header</span> &#123; <span class="attribute">background</span>: <span class="number">#1a869f</span>; <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>; &#125;</div><div class="line"><span class="selector-class">.title</span> &#123; <span class="attribute">color</span>: <span class="number">#fff</span>; <span class="attribute">margin</span>: <span class="number">0</span>; &#125;</div><div class="line"><span class="selector-class">.title</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">10px</span>; &#125;</div><div class="line"><span class="selector-class">.sub</span>, <span class="selector-class">.hero-list</span> &#123; <span class="attribute">color</span>: <span class="number">#1a869f</span>; &#125;</div><div class="line"><span class="selector-class">.hero-list</span> &#123; <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">30px</span>; <span class="attribute">margin-bottom</span>: <span class="number">30px</span>; <span class="attribute">font-weight</span>: bold; <span class="attribute">line-height</span>: <span class="number">2em</span>; <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="number">#b3b3b3</span>; &#125;</div><div class="line"><span class="selector-class">.hero-list</span> <span class="selector-tag">li</span> &#123; <span class="attribute">cursor</span>: pointer; &#125;</div><div class="line"><span class="selector-class">.hero-detail-wrap</span> &#123; <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>; &#125;</div><div class="line"><span class="selector-class">.hero-form</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">margin-bottom</span>: <span class="number">5px</span>; &#125;</div></pre></td></tr></table></figure>
<p>★完成以上動作後，可以看到基本的靜態頁面了！</p>
<p><br></p>
<p><strong>Step 2：將英雄列表變成動態列表</strong></p>
<p>首先須建立一個英雄列表的資料檔案，在 app 資料夾下方建立一個 hero.ts 檔，用來放入英雄們的資訊。</p>
<ul>
<li>hero.ts<br>使用 export 宣告一個 Heros 陣列，以便待會在 app.component.ts 中可引入使用，陣列中以物件（objects）的形式放入英雄們的詳細資訊。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">var</span> Heros = [</div><div class="line">    &#123;</div><div class="line">        id: <span class="number">1</span>,</div><div class="line">        name: <span class="string">"Windstorm"</span>,</div><div class="line">        power: <span class="string">"Weather mastery"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        id: <span class="number">2</span>,</div><div class="line">        name: <span class="string">"Mr. Nice"</span>,</div><div class="line">        power: <span class="string">"Killing them with kindness"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        id: <span class="number">3</span>,</div><div class="line">        name: <span class="string">"Magneta"</span>,</div><div class="line">        power: <span class="string">"Manipulates metalic objects"</span></div><div class="line">    &#125;,</div><div class="line">]</div></pre></td></tr></table></figure>
<p><br></p>
<ul>
<li>app.component.ts<br>先用 import 引入剛剛在 hero.ts 中用 export 宣告的 Heros 陣列，接著在 AppComponent 的 class 中宣告一個全域變數 heros，並將 Heros 陣列中的物件資訊放入 heros 中。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Heros &#125; <span class="keyword">from</span> <span class="string">'./shared/hero'</span>;</div><div class="line"></div><div class="line">@Component(&#123;</div><div class="line">  selector: <span class="string">'app-root'</span>,</div><div class="line">  templateUrl: <span class="string">'app.component.html'</span>,</div><div class="line">  styleUrls: [<span class="string">'app.component.css'</span>]</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</div><div class="line">  public heros = Heros;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><br></p>
<ul>
<li>app.component.html<br>將靜態的英雄列表，以 *ngFor 的方式帶入剛剛在 app.component.ts 中宣告的 heros 變數。並以 hero 代表該位英雄，在 li 標籤中放入 {{hero.name}} 列出英雄姓名。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"hero-list"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> *<span class="attr">ngFor</span>=<span class="string">"let hero of heros"</span>&gt;</span>&#123;&#123;hero.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line"></div></pre></td></tr></table></figure>
<p>★現在的英雄列表已經是動態的囉！</p>
<p><br></p>
<p><strong>Step 3：將點選到的英雄資訊列出</strong></p>
<ul>
<li>app.component.ts<br>在 app.component.ts 中宣告一個 selectHero 方法，以實現點選一位英雄後要執行的動作，也就是列出英雄詳細資訊。並宣告一個空的全域變數 selectedHero，用來置放被點選的英雄資訊。最後在 selectHero 方法中傳入被選取的 hero 變數，並將 hero 中的英雄詳細資訊放入 selectedHero 中。 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Heros &#125; <span class="keyword">from</span> <span class="string">'./shared/hero'</span>;</div><div class="line"></div><div class="line">@Component(&#123;</div><div class="line">  moduleId: <span class="built_in">module</span>.id,</div><div class="line">  selector: <span class="string">'app-root'</span>,</div><div class="line">  templateUrl: <span class="string">'app.component.html'</span>,</div><div class="line">  styleUrls: [<span class="string">'app.component.css'</span>]</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</div><div class="line">  public heros = Heros;</div><div class="line">  public selectedHero;</div><div class="line"></div><div class="line">  selectHero(hero)&#123;</div><div class="line">    <span class="keyword">this</span>.selectedHero = hero;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div></pre></td></tr></table></figure>
<p><br></p>
<ul>
<li>app.component.html<br>先將點選時呼叫 selectHero 方法的事件寫在英雄列表的 li 標籤中，並帶入代表該英雄的 hero 變數。在顯示英雄詳細資訊的區塊最外層的 div 標籤內放入 *ngIf，並以 selectedHero 是否有值來判斷內容的顯示。<br>詳細資訊中的編號、姓名、強項則以 selectedHero 變數分別帶入，並在顯示姓名、強項的 input 標籤內將原本靜態時的 value 換成以 ngModel 代入 selectedHero 變數。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero-profile"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>英雄列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero-detail-wrap"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"sub"</span>&gt;</span>請從列表中選一位英雄<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"hero-list"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span> *<span class="attr">ngFor</span>=<span class="string">"let hero of heros"</span> (<span class="attr">click</span>)=<span class="string">"selectHero(hero)"</span>&gt;</span>&#123;&#123;hero.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngIf</span>=<span class="string">"selectedHero"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"hero-detail"</span>&gt;</span>英雄詳細資訊<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>編號: &#123;&#123; selectedHero.id &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> [(<span class="attr">ngModel</span>)]=<span class="string">"selectedHero.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"hero-form"</span>&gt;</span>強項: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"power"</span> [(<span class="attr">ngModel</span>)]=<span class="string">"selectedHero.power"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div></pre></td></tr></table></figure>
<p>★如此一來就大功告成啦！此時點選上方的英雄列表，下放即會立即顯示該位英雄的詳細資訊囉！</p>
<p><br><br></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ul>
<li><a href="https://angular.io/docs/ts/latest/guide/architecture.html" target="_blank" rel="external">Angular2 官方教學</a></li>
<li><a href="http://blog.miniasp.com/post/2016/07/26/Introduction-to-Angular-2.aspx" target="_blank" rel="external">前端工程的夢幻逸品：Angular 2 開發框架介紹</a></li>
</ul>
</div></article><div class="tags"><a href="/tags/Angular2/">Angular2</a></div><div class="paginator"><a href="/2016/08/03/University/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div></section><footer><div class="copyright"><p>&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Anny Cheng</span></p><p class="theme">Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div></body><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></html>